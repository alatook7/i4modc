import{d as _e,r as i,c as N,a as t,w as o,b as d,D as ge,P as he,o as L,e as p,F as xe,g as ye,B as we,t as y}from"./index-7003eb70.js";import{s as G,S as ke,L as Ie,l as Ce,a as Ue,R as be,b as Ae,P as Re,c as Se,D as Ve}from"./cfg-15d347c0.js";import{d as I,e as C,C as Be,f as $,h as Te,F as Me,b as Ne,R as Le,c as De}from"./api-fb69189f.js";const Ee={class:"goods"},je=d("br",null,null,-1),qe={style:{display:"flex",width:"100%"}},Fe={style:{flex:1,marginLeft:"1px"}},Pe={class:"van-ellipsis",style:{"font-weight":"bold","white-space":"pre-wrap"}},Ge={class:"van-ellipsis"},$e={class:"van-ellipsis"},ze={class:"van-ellipsis",style:{"white-space":"pre-wrap"}},Oe={style:{flex:1,marginLeft:"10px"}},Ke=d("div",{style:{color:"rgba(0, 0, 0, 0.01)"}},"1",-1),He={style:{margin:"16px"}},Ye=_e({__name:"main1",setup(Je){const g=()=>{Ce()},f=i(!1),v=i(!1),m=i(""),U=i(""),z=l=>K(),O=()=>H(U.value),K=l=>{},H=l=>{if(l=="")return;h.value=[];let n={modId:I(),payload:{},sessionId:0,syncUid:0,limit:20,name:l};_.value=!0,C("/api/mod/GetMuteListByName",n).then(s=>{if(_.value=!1,s.code==1){let r=s.docs;r!=null&&r!=null&&r.length>0?(w(r),h.value.length<20&&(c.value=!0)):(w([]),c.value=!0)}else c.value=!0,s.code==4&&g()}).catch(s=>{c.value=!0,m.value="Connection error",v.value=!0})};let b=sessionStorage.getItem("globalAccountName");b==null&&(b="");const J=i(b),_=i(!1),c=i(!1),D=i(-1),h=i([]);function Q(){c.value=!1,E()}function w(l,e){for(let n=0;n<l.length;n++){const u=l[n];let s=Math.floor(u.duration/3600)+" hours";Math.floor(u.duration/3600)>=99998&&(s="∞"),h.value.push({uid:u.userUid,name:u.userName,reason:ne(u.resonType+""),beginAt:$(u.timeAt*1e3),endAtStr:$(u.untilAt*1e3),hours:s}),D.value=u.sortUid}}const E=l=>{let n={modId:I(),payload:{},sessionId:0,syncUid:D.value,limit:20};_.value=!0,C("/api/mod/GetMuteList",n).then(s=>{if(_.value=!1,s.code==1){let r=s.docs;r!=null&&r!=null&&r.length>0?(w(r),h.value.length<20&&(c.value=!0)):(w([]),c.value=!0)}else c.value=!0,s.code==4&&g()}).catch(s=>{c.value=!0,m.value="Connection error",v.value=!0})};Q();const W=()=>{c.value==!1&&E()},X=l=>{},k=i(!1),j=i(""),Y=l=>{j.value=l,k.value=!0};function Z(){k.value=!1}function ee(){let e={serverUid:0,modId:I(),payload:{},targetUserId:parseInt(j.value)};C("/api/mod/UnBinned",e).then(u=>{u.code==1?(f.value=!1,G({confirmButtonText:"OK",message:"Succeed"}).then(()=>{})):u.code==4?g():(m.value="error code: "+u.code,v.value=!0)}).catch(u=>{m.value="Connection error",v.value=!0})}const q=i(""),te=(l,e)=>{q.value=l,R.value=e,f.value=!0},A=i("24"),R=i(""),S=[{text:"Racist remarks",value:"1"},{text:"Gender discrimination remarks",value:"2"},{text:"Political remarks",value:"3"},{text:"Religious remarks",value:"4"},{text:"Threats",value:"5"},{text:"Drug/alcohol-related remarks",value:"6"},{text:"Swearing",value:"7"},{text:"Offensive language",value:"8"},{text:"Inappropriate language",value:"9"},{text:"Trolling",value:"10"},{text:"Spam",value:"11"},{text:"External links",value:"12"},{text:"Coordinates leakage",value:"13"},{text:"Inappropriate commander name",value:"14"},{text:"Harassment",value:"15"},{text:"Incitement to rule-breaking",value:"16"},{text:"Mute extension",value:"17"},{text:"Filter evasion",value:"18"},{text:"Inappropriate alliance name",value:"19"},{text:"Inappropriate planet name",value:"20"},{text:"Training",value:"21"},{text:"Inappropriate bio",value:"22"},{text:"Illegal gaming activities",value:"23"},{text:"Mute evasion",value:"24"}],V=i("Racist remarks"),F=i("1"),x=i(!1),ae=({selectedOptions:l})=>{x.value=!1,V.value=l[0].text,F.value=l[0].value},le=l=>{let n={serverUid:0,modId:I(),payload:{},targetUserId:parseInt(q.value),reasonType:parseInt(F.value),duration:parseInt(A.value)*3600};C("/api/mod/Binned",n).then(s=>{s.code==1?(f.value=!1,G({confirmButtonText:"OK",message:"Succeed"}).then(()=>{})):s.code==4?g():(m.value="error code: "+s.code,v.value=!0)}).catch(s=>{m.value="Connection error",v.value=!0})};function oe(){f.value=!1}function ne(l){if(l=="0")return"Multiple warnings";for(let e=0;e<S.length;e++){const n=S[e];if(n.value==l)return n.text}return l}return(l,e)=>{const n=we,u=Te,s=Ue,r=Be,se=ke,ue=Se,ie=Ve,re=Ie,B=ge,T=Me,M=be,ce=Ae,de=Ne,ve=Le,me=De,pe=Re,fe=he;return L(),N("div",Ee,[t(r,{span:"24"},{default:o(()=>[t(s,null,{default:o(()=>[t(n,{plain:"",type:"primary",onClick:g},{default:o(()=>[p("Log out")]),_:1}),t(u,{title:J.value,value:""},null,8,["title"])]),_:1})]),_:1}),je,t(se,{modelValue:U.value,"onUpdate:modelValue":e[0]||(e[0]=a=>U.value=a),"show-action":"",placeholder:"Commander name",onSearch:z},{action:o(()=>[t(n,{type:"primary",size:"small",onClick:O},{default:o(()=>[p("Search")]),_:1})]),_:1},8,["modelValue"]),t(re,{loading:_.value,"onUpdate:loading":e[1]||(e[1]=a=>_.value=a),finished:c.value,"finished-text":"No more","loading-text":"loading",onLoad:W},{default:o(()=>[(L(!0),N(xe,null,ye(h.value,a=>(L(),N("div",null,[t(ue,{animate:!1,onClick:P=>X(a)},{template:o(()=>[d("div",qe,[d("div",Fe,[d("div",Pe,y(a.name),1),d("div",Ge,y(a.beginAt)+"~"+y(a.endAtStr),1),d("div",$e,y(a.hours),1),d("div",ze,y(a.reason),1)]),d("div",Oe,[t(n,{icon:"close",type:"primary",size:"small",onClick:P=>te(a.uid,a.name)},null,8,["onClick"]),Ke,t(n,{icon:"chat-o",type:"primary",size:"small",onClick:P=>Y(a.uid)},null,8,["onClick"])])])]),_:2},1032,["onClick"]),t(ie,{style:{color:"#1989fa",borderColor:"#1989fa",padding:"0 16px"}})]))),256))]),_:1},8,["loading","finished"]),t(B,{show:v.value,"onUpdate:show":e[2]||(e[2]=a=>v.value=a),title:"Error",confirmButtonText:"Ok",messageAlign:"center",message:m.value},null,8,["show","message"]),t(B,{show:k.value,"onUpdate:show":e[3]||(e[3]=a=>k.value=a),title:"Confirm",confirmButtonText:"Ok",cancelButtonText:"Cancel",messageAlign:"center",message:"Are you sure to unmute it?","show-cancel-button":"",onConfirm:ee,onCancel:Z},null,8,["show"]),t(B,{width:"100%",show:f.value,"onUpdate:show":e[8]||(e[8]=a=>f.value=a),title:"Mute",showConfirmButton:!1,messageAlign:"center"},{default:o(()=>[t(me,{onSubmit:le},{default:o(()=>[t(de,{inset:""},{default:o(()=>[t(T,{modelValue:R.value,"onUpdate:modelValue":e[4]||(e[4]=a=>R.value=a),readonly:"",name:"Name",label:"Name",placeholder:"Name",rules:[{required:!0,message:"Input Name"}]},null,8,["modelValue"]),t(T,{modelValue:V.value,"onUpdate:modelValue":e[5]||(e[5]=a=>V.value=a),"is-link":"",readonly:"",label:"Reason",placeholder:"Reason",onClick:e[6]||(e[6]=a=>x.value=!0)},null,8,["modelValue"]),t(T,{name:"radio",label:"Time"},{input:o(()=>[t(ce,{modelValue:A.value,"onUpdate:modelValue":e[7]||(e[7]=a=>A.value=a),direction:"horizontal"},{default:o(()=>[t(M,{name:"24"},{default:o(()=>[p("24h")]),_:1}),t(M,{name:"72"},{default:o(()=>[p("72h")]),_:1}),t(M,{name:"99999"},{default:o(()=>[p("∞")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),d("div",He,[t(ve,{gutter:"24"},{default:o(()=>[t(r,{span:"12"},{default:o(()=>[t(n,{round:"",block:"",type:"primary","native-type":"submit"},{default:o(()=>[p(" Mute ")]),_:1})]),_:1}),t(r,{span:"12"},{default:o(()=>[t(n,{round:"",block:"",type:"primary",onClick:oe},{default:o(()=>[p(" Close ")]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1},8,["show"]),t(fe,{show:x.value,"onUpdate:show":e[10]||(e[10]=a=>x.value=a),round:"",position:"bottom"},{default:o(()=>[t(pe,{columns:S,onCancel:e[9]||(e[9]=a=>x.value=!1),onConfirm:ae})]),_:1},8,["show"])])}}});export{Ye as default};
