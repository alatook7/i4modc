import{d as ie,r as u,c as V,a as t,w as l,b as v,D as de,P as ce,o as A,e as c,F as ve,g as me,B as pe,t as B}from"./index-7003eb70.js";import{S as _e,L as fe,l as ge,s as he,a as xe,R as we,b as ye,P as ke,c as Ie,D as Ce}from"./cfg-15d347c0.js";import{d as N,e as T,C as be,f as Re,h as Ue,F as Se,b as Ve,R as Ae,c as Be}from"./api-fb69189f.js";const Ne={class:"goods"},Te=v("br",null,null,-1),Le={style:{display:"flex",width:"100%"}},De={style:{flex:1,marginLeft:"1px"}},Me={class:"van-ellipsis",style:{"font-weight":"bold","white-space":"pre-wrap"}},Fe={class:"van-ellipsis"},Pe={class:"van-ellipsis",style:{"white-space":"pre-wrap"}},qe={style:{margin:"16px"}},Oe=ie({__name:"warn",setup(Ee){const x=()=>{ge()},_=u(!1),m=u(!1),f=u(""),y=u(""),q=n=>G(),E=()=>$(y.value),G=n=>{},$=n=>{if(n=="")return;g.value=[];let o={modId:N(),payload:{},sessionId:0,syncUid:0,limit:20,name:n};p.value=!0,T("/api/mod/GetWarnListByName",o).then(s=>{if(p.value=!1,s.code==1){let r=s.docs;r!=null&&r!=null&&r.length>0?(w(r),g.value.length<20&&(i.value=!0)):(w([]),i.value=!0)}else i.value=!0,s.code==4&&x()}).catch(s=>{i.value=!0,f.value="Connection error",m.value=!0})};let k=sessionStorage.getItem("globalAccountName");k==null&&(k="");const z=u(k),p=u(!1),i=u(!1),L=u("-1"),g=u([]);function O(){i.value=!1,D()}function w(n,e){for(let o=0;o<n.length;o++){const d=n[o];g.value.push({uid:d.userUid,name:d.userName,reason:X(d.resonType+""),endAtStr:Re(d.timeAt*1e3)}),L.value=d._id}}const D=n=>{let o={modId:N(),payload:{},sessionId:0,syncUid:L.value,limit:20};p.value=!0,T("/api/mod/GetWarnList",o).then(s=>{if(p.value=!1,s.code==1){let r=s.docs;r!=null&&r!=null&&r.length>0?(w(r),g.value.length<20&&(i.value=!0)):(w([]),i.value=!0)}else i.value=!0,s.code==4&&x()}).catch(s=>{i.value=!0,f.value="Connection error",m.value=!0})};O();const W=()=>{i.value==!1&&D()},j=n=>{},M=u(""),H=(n,e)=>{M.value=n,C.value=e,_.value=!0},I=u("24"),C=u(""),b=[{text:"Racist remarks",value:"1"},{text:"Gender discrimination remarks",value:"2"},{text:"Political remarks",value:"3"},{text:"Religious remarks",value:"4"},{text:"Threats",value:"5"},{text:"Drug/alcohol-related remarks",value:"6"},{text:"Swearing",value:"7"},{text:"Offensive language",value:"8"},{text:"Inappropriate language",value:"9"},{text:"Trolling",value:"10"},{text:"Spam",value:"11"},{text:"External links",value:"12"},{text:"Coordinates leakage",value:"13"},{text:"Inappropriate commander name",value:"14"},{text:"Harassment",value:"15"},{text:"Incitement to rule-breaking",value:"16"},{text:"Mute extension",value:"17"},{text:"Filter evasion",value:"18"},{text:"Inappropriate alliance name",value:"19"},{text:"Inappropriate planet name",value:"20"},{text:"Training",value:"21"},{text:"Inappropriate bio",value:"22"},{text:"Illegal gaming activities",value:"23"},{text:"Mute evasion",value:"24"}],R=u("Racist remarks"),F=u("1"),h=u(!1),K=({selectedOptions:n})=>{h.value=!1,R.value=n[0].text,F.value=n[0].value},J=n=>{let o={serverUid:0,modId:N(),payload:{},targetUserId:parseInt(M.value),reasonType:parseInt(F.value),duration:parseInt(I.value)*3600};T("/api/mod/Binned",o).then(s=>{s.code==1?(_.value=!1,he({confirmButtonText:"OK",message:"Succeed"}).then(()=>{})):s.code==4?x():(f.value="error code: "+s.code,m.value=!0)}).catch(s=>{f.value="Connection error",m.value=!0})};function Q(){_.value=!1}function X(n){if(n=="0")return"Multiple warnings";for(let e=0;e<b.length;e++){const o=b[e];if(o.value==n)return o.text}return n}return(n,e)=>{const o=pe,d=Ue,s=xe,r=be,Y=_e,Z=Ie,ee=Ce,te=fe,P=de,U=Se,S=we,ae=ye,le=Ve,ne=Ae,oe=Be,se=ke,ue=ce;return A(),V("div",Ne,[t(r,{span:"24"},{default:l(()=>[t(s,null,{default:l(()=>[t(o,{plain:"",type:"primary",onClick:x},{default:l(()=>[c("Log out")]),_:1}),t(d,{title:z.value,value:""},null,8,["title"])]),_:1})]),_:1}),Te,t(Y,{modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=a=>y.value=a),"show-action":"",placeholder:"Commander name",onSearch:q},{action:l(()=>[t(o,{type:"primary",size:"small",onClick:E},{default:l(()=>[c("Search")]),_:1})]),_:1},8,["modelValue"]),t(te,{loading:p.value,"onUpdate:loading":e[1]||(e[1]=a=>p.value=a),finished:i.value,"finished-text":"No more","loading-text":"loading",onLoad:W},{default:l(()=>[(A(!0),V(ve,null,me(g.value,a=>(A(),V("div",null,[t(Z,{animate:!1,onClick:re=>j(a)},{template:l(()=>[v("div",Le,[v("div",De,[v("div",Me,B(a.name),1),v("div",Fe,B(a.endAtStr),1),v("div",Pe,B(a.reason),1)]),t(o,{icon:"close",type:"primary",size:"small",onClick:re=>H(a.uid,a.name)},null,8,["onClick"])])]),_:2},1032,["onClick"]),t(ee,{style:{color:"#1989fa",borderColor:"#1989fa",padding:"0 16px"}})]))),256))]),_:1},8,["loading","finished"]),t(P,{show:m.value,"onUpdate:show":e[2]||(e[2]=a=>m.value=a),title:"Error",confirmButtonText:"Ok",messageAlign:"center",message:f.value},null,8,["show","message"]),t(P,{width:"100%",show:_.value,"onUpdate:show":e[7]||(e[7]=a=>_.value=a),title:"Mute",showConfirmButton:!1,messageAlign:"center"},{default:l(()=>[t(oe,{onSubmit:J},{default:l(()=>[t(le,{inset:""},{default:l(()=>[t(U,{modelValue:C.value,"onUpdate:modelValue":e[3]||(e[3]=a=>C.value=a),readonly:"",name:"Name",label:"Name",placeholder:"Name",rules:[{required:!0,message:"Input Name"}]},null,8,["modelValue"]),t(U,{modelValue:R.value,"onUpdate:modelValue":e[4]||(e[4]=a=>R.value=a),"is-link":"",readonly:"",label:"Reason",placeholder:"Reason",onClick:e[5]||(e[5]=a=>h.value=!0)},null,8,["modelValue"]),t(U,{name:"radio",label:"Time"},{input:l(()=>[t(ae,{modelValue:I.value,"onUpdate:modelValue":e[6]||(e[6]=a=>I.value=a),direction:"horizontal"},{default:l(()=>[t(S,{name:"24"},{default:l(()=>[c("24h")]),_:1}),t(S,{name:"72"},{default:l(()=>[c("72h")]),_:1}),t(S,{name:"99999"},{default:l(()=>[c("âˆž")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),v("div",qe,[t(ne,{gutter:"24"},{default:l(()=>[t(r,{span:"12"},{default:l(()=>[t(o,{round:"",block:"",type:"primary","native-type":"submit"},{default:l(()=>[c(" Mute ")]),_:1})]),_:1}),t(r,{span:"12"},{default:l(()=>[t(o,{round:"",block:"",type:"primary",onClick:Q},{default:l(()=>[c(" Close ")]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1},8,["show"]),t(ue,{show:h.value,"onUpdate:show":e[9]||(e[9]=a=>h.value=a),round:"",position:"bottom"},{default:l(()=>[t(se,{columns:b,onCancel:e[8]||(e[8]=a=>h.value=!1),onConfirm:K})]),_:1},8,["show"])])}}});export{Oe as default};
