import{d as re,r as u,c as B,a as e,w as t,b as c,D as ie,P as de,o as A,e as d,F as ce,g as me,B as ve,t as I}from"./index-3433adfa.js";import{S as pe,L as _e,l as fe,g as ge,s as q,a as xe,R as he,b as ye,P as we,c as ke,D as Ie}from"./cfg-f39eed52.js";import{C as be,d as T,e as D,h as Ce,R as Ue,F as Ve,b as Re,c as Se}from"./api-9ae26c42.js";import{I as Ne}from"./index-2e06d4bc.js";const Be={class:"goods"},Ae=c("br",null,null,-1),Te={style:{display:"flex",width:"100%"}},De={style:{flex:1,marginLeft:"1px"}},Le={class:"van-ellipsis",style:{"font-weight":"bold","white-space":"pre-wrap"}},Pe={class:"van-ellipsis"},qe={class:"van-ellipsis"},Fe={class:"van-ellipsis"},We={style:{margin:"16px"}},Ee={style:{margin:"16px"}},je=re({__name:"player",setup(Me){const y=()=>{fe()},f=u(!1),m=u(!1),v=u(""),b=u(""),F=o=>E(),W=()=>M(b.value),E=o=>{},M=o=>{if(o=="")return;U.value=[];let n={modId:T(),payload:{},sessionId:0,syncUid:0,limit:20,name:o};D("/api/mod/GetPlayerListByName",n).then(s=>{if(s.code==1){let i=s.docs;i!=null&&i!=null&&i.length>0&&G(i)}else s.code==4&&y()}).catch(s=>{v.value="Connection error",m.value=!0})};let C=sessionStorage.getItem("globalAccountName");C==null&&(C="");const $=u(C),z=u(9994604563141584e4),U=u([]);function G(o,a){for(let n=0;n<o.length;n++){const r=o[n];U.value.push({uid:r.userUid,name:r.name,ally:r.allyName,warntime:r.warnTime,lv:r.commander_info.level,imgurl:ge(r.icon_id)}),z.value=r.userUid}}const g=u(!1),O=(o,a)=>{w.value=o,p.value=a,g.value=!0},j=o=>{let n={serverUid:0,modId:T(),payload:{},targetUserId:parseInt(w.value),reasonType:parseInt(R.value)};D("/api/mod/Warn",n).then(s=>{s.code==1?(g.value=!1,q({confirmButtonText:"OK",message:"Succeed"}).then(()=>{})):s.code==4?y():(v.value="error code: "+s.code,m.value=!0)}).catch(s=>{v.value="Connection error",m.value=!0})};function H(){g.value=!1}const w=u(""),K=(o,a)=>{w.value=o,p.value=a,f.value=!0},V=u("24"),p=u(""),J=[{text:"Racist remarks",value:"1"},{text:"Gender discrimination remarks",value:"2"},{text:"Political remarks",value:"3"},{text:"Religious remarks",value:"4"},{text:"Threats",value:"5"},{text:"Drug/alcohol-related remarks",value:"6"},{text:"Swearing",value:"7"},{text:"Offensive language",value:"8"},{text:"Inappropriate language",value:"9"},{text:"Trolling",value:"10"},{text:"Spam",value:"11"},{text:"External links",value:"12"},{text:"Coordinates leakage",value:"13"},{text:"Inappropriate commander name",value:"14"},{text:"Harassment",value:"15"},{text:"Incitement to rule-breaking",value:"16"},{text:"Mute extension",value:"17"},{text:"Filter evasion",value:"18"},{text:"Inappropriate alliance name",value:"19"},{text:"Inappropriate planet name",value:"20"},{text:"Training",value:"21"},{text:"Inappropriate bio",value:"22"},{text:"Illegal gaming activities",value:"23"},{text:"Mute evasion",value:"24"}],x=u("Racist remarks"),R=u("1"),_=u(!1),Q=({selectedOptions:o})=>{_.value=!1,x.value=o[0].text,R.value=o[0].value},X=o=>{let n={serverUid:0,modId:T(),payload:{},targetUserId:parseInt(w.value),reasonType:parseInt(R.value),duration:parseInt(V.value)*3600};D("/api/mod/Binned",n).then(s=>{s.code==1?(f.value=!1,q({confirmButtonText:"OK",message:"Succeed"}).then(()=>{})):s.code==4?y():(v.value="error code: "+s.code,m.value=!0)}).catch(s=>{v.value="Connection error",m.value=!0})};function Y(){f.value=!1}return(o,a)=>{const n=ve,r=Ce,s=xe,i=be,Z=pe,ee=Ne,S=Ue,ae=ke,te=Ie,le=_e,N=ie,h=Ve,L=Re,P=Se,k=he,ne=ye,oe=we,se=de;return A(),B("div",Be,[e(i,{span:"24"},{default:t(()=>[e(s,null,{default:t(()=>[e(n,{plain:"",type:"primary",onClick:y},{default:t(()=>[d("Log out")]),_:1}),e(r,{title:$.value,value:""},null,8,["title"])]),_:1})]),_:1}),Ae,e(Z,{modelValue:b.value,"onUpdate:modelValue":a[0]||(a[0]=l=>b.value=l),"show-action":"",placeholder:"Commander name",onSearch:F},{action:t(()=>[e(n,{type:"primary",size:"small",onClick:W},{default:t(()=>[d("Search")]),_:1})]),_:1},8,["modelValue"]),e(le,null,{default:t(()=>[(A(!0),B(ce,null,me(U.value,l=>(A(),B("div",null,[e(ae,{animate:!1},{template:t(()=>[c("div",Te,[e(ee,{fit:"contain",width:"4.38rem",height:"5rem",src:l.imgurl},null,8,["src"]),c("div",De,[c("div",Le,I(l.name),1),c("div",Pe,I(l.ally),1),c("div",qe,"Lv."+I(l.lv),1),c("div",Fe,"Warn: "+I(l.warntime),1)]),e(S,{gutter:[1,5],justify:"end"},{default:t(()=>[e(i,{span:"20"},{default:t(()=>[e(n,{icon:"close",type:"primary",size:"small",onClick:ue=>K(l.uid,l.name)},null,8,["onClick"])]),_:2},1024),e(i,{span:"20"},{default:t(()=>[e(n,{icon:"warn-o",type:"primary",size:"small",onClick:ue=>O(l.uid,l.name)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)])]),_:2},1024),e(te,{style:{color:"#1989fa",borderColor:"#1989fa",padding:"0 16px"}})]))),256))]),_:1}),e(N,{show:m.value,"onUpdate:show":a[1]||(a[1]=l=>m.value=l),title:"Error",confirmButtonText:"Ok",messageAlign:"center",message:v.value},null,8,["show","message"]),e(N,{width:"100%",show:g.value,"onUpdate:show":a[5]||(a[5]=l=>g.value=l),title:"Warn",showConfirmButton:!1,messageAlign:"center"},{default:t(()=>[e(P,{onSubmit:j},{default:t(()=>[e(L,{inset:""},{default:t(()=>[e(h,{modelValue:p.value,"onUpdate:modelValue":a[2]||(a[2]=l=>p.value=l),readonly:"",name:"Name",label:"Name",placeholder:"Name",rules:[{required:!0,message:"Input Name"}]},null,8,["modelValue"]),e(h,{modelValue:x.value,"onUpdate:modelValue":a[3]||(a[3]=l=>x.value=l),"is-link":"",readonly:"",label:"Reason",placeholder:"Reason",onClick:a[4]||(a[4]=l=>_.value=!0)},null,8,["modelValue"])]),_:1}),c("div",We,[e(S,{gutter:"24"},{default:t(()=>[e(i,{span:"12"},{default:t(()=>[e(n,{round:"",block:"",type:"primary","native-type":"submit"},{default:t(()=>[d(" Warn ")]),_:1})]),_:1}),e(i,{span:"12"},{default:t(()=>[e(n,{round:"",block:"",type:"primary",onClick:H},{default:t(()=>[d(" Close ")]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1},8,["show"]),e(N,{width:"100%",show:f.value,"onUpdate:show":a[10]||(a[10]=l=>f.value=l),title:"Mute",showConfirmButton:!1,messageAlign:"center"},{default:t(()=>[e(P,{onSubmit:X},{default:t(()=>[e(L,{inset:""},{default:t(()=>[e(h,{modelValue:p.value,"onUpdate:modelValue":a[6]||(a[6]=l=>p.value=l),readonly:"",name:"Name",label:"Name",placeholder:"Name",rules:[{required:!0,message:"Input Name"}]},null,8,["modelValue"]),e(h,{modelValue:x.value,"onUpdate:modelValue":a[7]||(a[7]=l=>x.value=l),"is-link":"",readonly:"",label:"Reason",placeholder:"Reason",onClick:a[8]||(a[8]=l=>_.value=!0)},null,8,["modelValue"]),e(h,{name:"radio",label:"Time"},{input:t(()=>[e(ne,{modelValue:V.value,"onUpdate:modelValue":a[9]||(a[9]=l=>V.value=l),direction:"horizontal"},{default:t(()=>[e(k,{name:"1"},{default:t(()=>[d("1h")]),_:1}),e(k,{name:"24"},{default:t(()=>[d("24h")]),_:1}),e(k,{name:"72"},{default:t(()=>[d("72h")]),_:1}),e(k,{name:"99999"},{default:t(()=>[d("âˆž")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),c("div",Ee,[e(S,{gutter:"24"},{default:t(()=>[e(i,{span:"12"},{default:t(()=>[e(n,{round:"",block:"",type:"primary","native-type":"submit"},{default:t(()=>[d(" Mute ")]),_:1})]),_:1}),e(i,{span:"12"},{default:t(()=>[e(n,{round:"",block:"",type:"primary",onClick:Y},{default:t(()=>[d(" Close ")]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1},8,["show"]),e(se,{show:_.value,"onUpdate:show":a[12]||(a[12]=l=>_.value=l),round:"",position:"bottom"},{default:t(()=>[e(oe,{"confirm-button-text":"Confirm","cancel-button-text":"Cancel",columns:J,onCancel:a[11]||(a[11]=l=>_.value=!1),onConfirm:Q})]),_:1},8,["show"])])}}});export{je as default};
