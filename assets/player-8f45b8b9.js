import{d as re,r as u,c as B,a as e,w as l,b as m,D as ie,P as de,o as A,e as d,F as me,g as ce,B as ve,t as k}from"./index-7003eb70.js";import{S as pe,L as _e,l as fe,g as ge,s as q,a as ye,R as he,b as xe,P as we,c as ke,D as Ie}from"./cfg-15d347c0.js";import{C as be,d as T,e as D,h as Ue,R as Ve,F as Ce,b as Re,c as Se}from"./api-fb69189f.js";import{I as Ne}from"./index-42e70cfe.js";const Be={class:"goods"},Ae=m("br",null,null,-1),Te={style:{display:"flex",width:"100%"}},De={style:{flex:1,marginLeft:"1px"}},Le={class:"van-ellipsis",style:{"font-weight":"bold","white-space":"pre-wrap"}},Pe={class:"van-ellipsis"},qe={class:"van-ellipsis"},Fe={class:"van-ellipsis"},We={style:{margin:"16px"}},Ee={style:{margin:"16px"}},je=re({__name:"player",setup(Me){const x=()=>{fe()},f=u(!1),c=u(!1),v=u(""),I=u(""),F=o=>E(),W=()=>M(I.value),E=o=>{},M=o=>{if(o=="")return;U.value=[];let n={modId:T(),payload:{},sessionId:0,syncUid:0,limit:20,name:o};D("/api/mod/GetPlayerListByName",n).then(s=>{if(s.code==1){let i=s.docs;i!=null&&i!=null&&i.length>0&&G(i)}else s.code==4&&x()}).catch(s=>{v.value="Connection error",c.value=!0})};let b=sessionStorage.getItem("globalAccountName");b==null&&(b="");const $=u(b),z=u(9994604563141584e4),U=u([]);function G(o,a){for(let n=0;n<o.length;n++){const r=o[n];U.value.push({uid:r.userUid,name:r.name,ally:r.allyName,warntime:r.warnTime,lv:r.commander_info.level,imgurl:ge(r.icon_id)}),z.value=r.userUid}}const g=u(!1),O=(o,a)=>{w.value=o,p.value=a,g.value=!0},j=o=>{let n={serverUid:0,modId:T(),payload:{},targetUserId:parseInt(w.value),reasonType:parseInt(C.value)};D("/api/mod/Warn",n).then(s=>{s.code==1?(g.value=!1,q({confirmButtonText:"OK",message:"Succeed"}).then(()=>{})):s.code==4?x():(v.value="error code: "+s.code,c.value=!0)}).catch(s=>{v.value="Connection error",c.value=!0})};function H(){g.value=!1}const w=u(""),K=(o,a)=>{w.value=o,p.value=a,f.value=!0},V=u("24"),p=u(""),J=[{text:"Racist remarks",value:"1"},{text:"Gender discrimination remarks",value:"2"},{text:"Political remarks",value:"3"},{text:"Religious remarks",value:"4"},{text:"Threats",value:"5"},{text:"Drug/alcohol-related remarks",value:"6"},{text:"Swearing",value:"7"},{text:"Offensive language",value:"8"},{text:"Inappropriate language",value:"9"},{text:"Trolling",value:"10"},{text:"Spam",value:"11"},{text:"External links",value:"12"},{text:"Coordinates leakage",value:"13"},{text:"Inappropriate commander name",value:"14"},{text:"Harassment",value:"15"},{text:"Incitement to rule-breaking",value:"16"},{text:"Mute extension",value:"17"},{text:"Filter evasion",value:"18"},{text:"Inappropriate alliance name",value:"19"},{text:"Inappropriate planet name",value:"20"},{text:"Training",value:"21"},{text:"Inappropriate bio",value:"22"},{text:"Illegal gaming activities",value:"23"},{text:"Mute evasion",value:"24"}],y=u("Racist remarks"),C=u("1"),_=u(!1),Q=({selectedOptions:o})=>{_.value=!1,y.value=o[0].text,C.value=o[0].value},X=o=>{let n={serverUid:0,modId:T(),payload:{},targetUserId:parseInt(w.value),reasonType:parseInt(C.value),duration:parseInt(V.value)*3600};D("/api/mod/Binned",n).then(s=>{s.code==1?(f.value=!1,q({confirmButtonText:"OK",message:"Succeed"}).then(()=>{})):s.code==4?x():(v.value="error code: "+s.code,c.value=!0)}).catch(s=>{v.value="Connection error",c.value=!0})};function Y(){f.value=!1}return(o,a)=>{const n=ve,r=Ue,s=ye,i=be,Z=pe,ee=Ne,R=Ve,ae=ke,te=Ie,le=_e,S=ie,h=Ce,L=Re,P=Se,N=he,ne=xe,oe=we,se=de;return A(),B("div",Be,[e(i,{span:"24"},{default:l(()=>[e(s,null,{default:l(()=>[e(n,{plain:"",type:"primary",onClick:x},{default:l(()=>[d("Log out")]),_:1}),e(r,{title:$.value,value:""},null,8,["title"])]),_:1})]),_:1}),Ae,e(Z,{modelValue:I.value,"onUpdate:modelValue":a[0]||(a[0]=t=>I.value=t),"show-action":"",placeholder:"Commander name",onSearch:F},{action:l(()=>[e(n,{type:"primary",size:"small",onClick:W},{default:l(()=>[d("Search")]),_:1})]),_:1},8,["modelValue"]),e(le,null,{default:l(()=>[(A(!0),B(me,null,ce(U.value,t=>(A(),B("div",null,[e(ae,{animate:!1},{template:l(()=>[m("div",Te,[e(ee,{fit:"contain",width:"4.38rem",height:"5rem",src:t.imgurl},null,8,["src"]),m("div",De,[m("div",Le,k(t.name),1),m("div",Pe,k(t.ally),1),m("div",qe,"Lv."+k(t.lv),1),m("div",Fe,"Warn: "+k(t.warntime),1)]),e(R,{gutter:[1,5],justify:"end"},{default:l(()=>[e(i,{span:"20"},{default:l(()=>[e(n,{icon:"close",type:"primary",size:"small",onClick:ue=>K(t.uid,t.name)},null,8,["onClick"])]),_:2},1024),e(i,{span:"20"},{default:l(()=>[e(n,{icon:"warn-o",type:"primary",size:"small",onClick:ue=>O(t.uid,t.name)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)])]),_:2},1024),e(te,{style:{color:"#1989fa",borderColor:"#1989fa",padding:"0 16px"}})]))),256))]),_:1}),e(S,{show:c.value,"onUpdate:show":a[1]||(a[1]=t=>c.value=t),title:"Error",confirmButtonText:"Ok",messageAlign:"center",message:v.value},null,8,["show","message"]),e(S,{width:"100%",show:g.value,"onUpdate:show":a[5]||(a[5]=t=>g.value=t),title:"Warn",showConfirmButton:!1,messageAlign:"center"},{default:l(()=>[e(P,{onSubmit:j},{default:l(()=>[e(L,{inset:""},{default:l(()=>[e(h,{modelValue:p.value,"onUpdate:modelValue":a[2]||(a[2]=t=>p.value=t),readonly:"",name:"Name",label:"Name",placeholder:"Name",rules:[{required:!0,message:"Input Name"}]},null,8,["modelValue"]),e(h,{modelValue:y.value,"onUpdate:modelValue":a[3]||(a[3]=t=>y.value=t),"is-link":"",readonly:"",label:"Reason",placeholder:"Reason",onClick:a[4]||(a[4]=t=>_.value=!0)},null,8,["modelValue"])]),_:1}),m("div",We,[e(R,{gutter:"24"},{default:l(()=>[e(i,{span:"12"},{default:l(()=>[e(n,{round:"",block:"",type:"primary","native-type":"submit"},{default:l(()=>[d(" Warn ")]),_:1})]),_:1}),e(i,{span:"12"},{default:l(()=>[e(n,{round:"",block:"",type:"primary",onClick:H},{default:l(()=>[d(" Close ")]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1},8,["show"]),e(S,{width:"100%",show:f.value,"onUpdate:show":a[10]||(a[10]=t=>f.value=t),title:"Mute",showConfirmButton:!1,messageAlign:"center"},{default:l(()=>[e(P,{onSubmit:X},{default:l(()=>[e(L,{inset:""},{default:l(()=>[e(h,{modelValue:p.value,"onUpdate:modelValue":a[6]||(a[6]=t=>p.value=t),readonly:"",name:"Name",label:"Name",placeholder:"Name",rules:[{required:!0,message:"Input Name"}]},null,8,["modelValue"]),e(h,{modelValue:y.value,"onUpdate:modelValue":a[7]||(a[7]=t=>y.value=t),"is-link":"",readonly:"",label:"Reason",placeholder:"Reason",onClick:a[8]||(a[8]=t=>_.value=!0)},null,8,["modelValue"]),e(h,{name:"radio",label:"Time"},{input:l(()=>[e(ne,{modelValue:V.value,"onUpdate:modelValue":a[9]||(a[9]=t=>V.value=t),direction:"horizontal"},{default:l(()=>[e(N,{name:"24"},{default:l(()=>[d("24h")]),_:1}),e(N,{name:"72"},{default:l(()=>[d("72h")]),_:1}),e(N,{name:"99999"},{default:l(()=>[d("âˆž")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),m("div",Ee,[e(R,{gutter:"24"},{default:l(()=>[e(i,{span:"12"},{default:l(()=>[e(n,{round:"",block:"",type:"primary","native-type":"submit"},{default:l(()=>[d(" Mute ")]),_:1})]),_:1}),e(i,{span:"12"},{default:l(()=>[e(n,{round:"",block:"",type:"primary",onClick:Y},{default:l(()=>[d(" Close ")]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1},8,["show"]),e(se,{show:_.value,"onUpdate:show":a[12]||(a[12]=t=>_.value=t),round:"",position:"bottom"},{default:l(()=>[e(oe,{columns:J,onCancel:a[11]||(a[11]=t=>_.value=!1),onConfirm:Q})]),_:1},8,["show"])])}}});export{je as default};
