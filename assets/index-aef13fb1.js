import{d as b,r as g,c as x,a as o,w as s,D as y,o as I,u as k,b as B,e as C,f as S,B as V}from"./index-3433adfa.js";import{R as q,g as N,l as U,a as F,C as K,F as M,b as R,c as T}from"./api-9ae26c42.js";import{I as A}from"./index-2e06d4bc.js";const D={class:"goods"},E={style:{margin:"16px"}},z=b({__name:"index",setup(G){const n=g(!1),r=g("Connection error"),c=g("");function v(a,e){return Math.floor(Math.random()*(e-a))+a}const f=a=>{let e=c.value,u=v(1e5,1e6);h(parseInt(e),u)},h=(a,e)=>{U("/api/mod/Login",{serverUid:0,payload:{},modKey:a,clientRid:e}).then(l=>{if(l.code==1){let t=l,i=t.modId,m=t.modToken;sessionStorage.setItem("globalAccountName",i+"");let _=m+":"+e;sessionStorage.setItem("globalSession",F(_)),S.push("mute")}else{let t=l;t!=null?(r.value="error code: "+t.code,n.value=!0):(r.value="Server data error",n.value=!0)}n.value=!0}).catch(l=>{r.value="Connection error",n.value=!0})};return(a,e)=>{const u=A,d=K,l=M,t=R,i=V,m=T,_=q,w=y;return I(),x("div",D,[o(_,{gutter:[20,20]},{default:s(()=>[o(d,{span:"24"},{default:s(()=>[o(u,{width:"100%",src:k(N)("../logo/onlinelogo.png")},null,8,["src"])]),_:1}),o(d,{span:"24"},{default:s(()=>[o(m,{onSubmit:f},{default:s(()=>[o(t,{inset:""},{default:s(()=>[o(l,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=p=>c.value=p),required:"","label-align":"top",name:"code",label:"code",placeholder:"",rules:[{required:!0,message:"Incorrect code"}]},null,8,["modelValue"])]),_:1}),B("div",E,[o(i,{round:"",block:"",type:"primary","native-type":"submit"},{default:s(()=>[C(" log in ")]),_:1})])]),_:1})]),_:1})]),_:1}),o(w,{show:n.value,"onUpdate:show":e[1]||(e[1]=p=>n.value=p),title:"Error",confirmButtonText:"Ok",messageAlign:"center",message:r.value},null,8,["show","message"])])}}});export{z as default};
